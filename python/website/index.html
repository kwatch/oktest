<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.6: http://docutils.sourceforge.net/" />
<title>Oktest - a new style testing library -</title>
<link rel="stylesheet" href="style.css" type="text/css" />
</head>
<body>
<div class="document" id="readme">
<h1 class="title">Oktest - a new style testing library -</h1>

<p>$Release: 0.2.2 $</p>
<div class="section" id="overview">

<h2>Overview</h2>
<p>Oktest is a new-style testing library for Python.</p>
<pre class="literal-block">
from oktest import ok
ok (x) &gt; 0                 # same as assert_(x &gt; 0)
ok (s) == 'foo'            # same as assertEqual(s, 'foo')
ok (s) != 'foo'            # same as assertNotEqual(s, 'foo')
ok (f).raises(ValueError)  # same as assertRaises(ValueError, f)
ok (u'foo').is_a(unicode)  # same as assert_(isinstance(u'foo', unicode))
not_ok (u'foo').is_a(int)  # same as assert_(not isinstance(u'foo', int))
ok ('A.txt').is_file()     # same as assert_(os.path.isfile('A.txt'))
not_ok ('A.txt').is_dir()  # same as assert_(not os.path.isdir('A.txt'))
</pre>
<p>You can use ok() instead of 'assertXxx()' in unittest.</p>
<p>Oktest requires Python 2.3 or later. Oktest is ready for Python 3.</p>
<p>NOTICE!! Oktest is a young project and specification may change in the future.</p>
</div>
<div class="section" id="download">

<h2>Download</h2>
<p><a class="reference external" href="http://pypi.python.org/pypi/Oktest/">http://pypi.python.org/pypi/Oktest/</a></p>
<p>Installation:</p>
<pre class="literal-block">
## if you have installed easy_install:
$ sudo easy_install Oktest
## or download Oktest-0.2.2.tar.gz and install it
$ wget http://pypi.python.org/packages/source/O/Oktest/Oktest-0.2.2.tar.gz
$ tar xzf Oktest-0.2.2.tar.gz
$ cd Oktest-0.2.2/
$ sudo python setup.py install
</pre>
</div>
<div class="section" id="example">

<h2>Example</h2>
<p>test_example.py:</p>
<pre class="literal-block">
from oktest import ok, run
import sys, os

## no need to extend TestCase class
class Example1Test(object):

    ## invoked only once before all tests
    &#64;classmethod
    def before_all(self):
        os.mkdir('tmp.d')

    ## invoked only once after all tests done
    &#64;classmethod
    def after_all(self):
        import shutil
        shutil.rmtree('tmp.d')

    ## invoked before each test
    def before_all(self):
        self.val = ['aaa', 'bbb', 'ccc']

    ## invoked after each test
    def after_all(self):
        pass

    ## test methods
    def test_valtype(self):
        ok (type(self.val)) == list

    def test_length(self):
        ok (len(self.val)) == 3


## 'ok()' is available with unittest.TestCase
import unittest
class Example2Test(unittest.TestCase):

    def setUp(self):
        self.val = ['aaa', 'bbb', 'ccc']

    def test_valtype(self):
        ok (type(self.val)) == list

    def test_length(self):
        ok (len(self.val)) == 3

## invoke tests
if __name__ == '__main__':
    from oktest import run
    run(Example1Test, Example2Test)
    ## or
    #run('.*Test$')  # specify class names by regular expression
</pre>
</div>
<div class="section" id="reference">

<h2>Reference</h2>
<dl class="docutils">
<dt>ok (x) == y</dt>
<dd>Raise AssertionError unless x == y.</dd>
<dt>ok (x) != y</dt>
<dd>Raise AssertionError unless x != y.</dd>
<dt>ok (x) &gt; y</dt>
<dd>Raise AssertionError unless x &gt; y.</dd>
<dt>ok (x) &gt;= y</dt>
<dd>Raise AssertionError unless x &gt;= y.</dd>
<dt>ok (x) &lt; y</dt>
<dd>Raise AssertionError unless x &lt; y.</dd>
<dt>ok (x) &lt;= y</dt>
<dd>Raise AssertionError unless x &lt;= y.</dd>
<dt>ok (x).in_(y)</dt>
<dd>Raise AssertionError unless x in y.</dd>
<dt>ok (x).contains(y)</dt>
<dd>Raise AssertionError unless y in x. This is opposite of in_().</dd>
<dt>ok (x).is_(y)</dt>
<dd>Raise AssertionError unless x is y.</dd>
<dt>ok (x).is_not(y)</dt>
<dd>Raise AssertionError if x is y.</dd>
<dt>ok (x).is_a(y)</dt>
<dd>Raise AssertionError unless isinstance(x, y).</dd>
<dt>ok (x).matches(y)</dt>
<dd>If y is a string, raise AssertionError unless re.search(y, x).
If y is a re.pattern object, raise AssertionError unless y.search(x).</dd>
<dt>ok (path).is_file()</dt>
<dd>Raise AssertionError unless os.path.isfile(path).</dd>
<dt>ok (path).is_dir()</dt>
<dd>Raise AssertionError unless os.path.isdir(path).</dd>
<dt>ok (path).exists()</dt>
<dd>Raise AssertionError unless os.path.exists(path).</dd>
<dt>ok (func).raises(error_class[, errmsg=None])</dt>
<dd>Raise AssertionError unless func() raises error_class.
It sets raised exception into 'func.exception' therefore you can do another test with raised exception object.</dd>
<dt>not_ok (x)</dt>
<dd>Opposite of ok(x). For example, 'not_ok (&quot;foo&quot;).matches(r&quot;[0-9]+&quot;)' is True.</dd>
<dt>run(*classes)</dt>
<dd>Invokes tests of each class.
Argument can be regular expression string.
For example, run(r'.*Test$') invokes tests of Example1Test, Example2Test, and so on.</dd>
<dt>dummy_file(filename, content)</dt>
<dd>Create dummy file with specified content.
For example, 'with dummy_file(&quot;A.txt&quot;, &quot;aaa&quot;) ...' creates dummy file 'A.txt' with content 'aaa' and it will be removed automatically at the end of with-statement block.</dd>
<dt>dummy_dir(dirname)</dt>
<dd>Create dummy directory.
For example, 'with dummy_dir(&quot;tmp.d&quot;) ...' creates dummy directory 'tmp.txt' and it will be removed automatically at the end of with-statement block.</dd>
<dt>chdir(dirname)</dt>
<dd>Change current directory to dirname temporarily.
For example, 'with chdir(&quot;lib&quot;) ...' changes current directory to 'lib' and back-to original directory at the end of with-statement block.</dd>
</dl>
</div>
<div class="section" id="tips">

<h2>Tips</h2>
<ul class="simple">
<li>You can filter test methods to invoke by environment variable $TEST. For example, 'export TEST=&quot;ex[0-9]+&quot;' will invokes 'test_ex1()', 'test_ex2()', ..., but not invoke 'test_1()', 'test_2()', and so on.</li>
<li>If you want to output format, create oktest.Reporter subclass and set it to oktest.REPORTER variable.</li>
</ul>
</div>
<div class="section" id="todo">

<h2>ToDo</h2>
<ul class="simple">
<li>[_] print 'diff -u' when two strings are different</li>
<li>[_] improve reporters</li>
<li>[_] make package(?)</li>
</ul>
</div>
<div class="section" id="license">

<h2>License</h2>
<p>$License: MIT License $</p>
</div>
<div class="section" id="copyright">

<h2>Copyright</h2>
<p>$Copyright: copyright(c) 2010 kuwata-lab.com all rights reserved $</p>
</div>
</div>
</body>
</html>
